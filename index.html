<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="Â¿QuÃ© partido encaja mejor contigo en estas elecciones de AragÃ³n 2026? Responde 8 preguntas rÃ¡pidas y descubre quÃ© propuestas se alinean mÃ¡s con tus prioridades."
    />
    <title>Cuestionario Electoral - End to End</title>
    <style>
      :root {
        --bg-top: #f8fafc;
        --bg-bottom: #e2e8f0;
        --text: #0f172a;
        --muted: #64748b;
        --card: #ffffff;
        --accent: #1f2937;
        --accent-hover: #374151;
        --border: #e2e8f0;
        --shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
      }

      * { box-sizing: border-box; }

      body {
        margin: 0;
        font-family: "IBM Plex Sans", "Segoe UI", system-ui, -apple-system, sans-serif;
        color: var(--text);
        background: linear-gradient(180deg, var(--bg-top), var(--bg-bottom));
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 64px 20px 96px;
      }

      .center { text-align: center; }

      .hero h1 {
        font-size: clamp(28px, 5vw, 48px);
        margin: 0 0 16px;
        line-height: 1.1;
      }

      .hero p {
        font-size: clamp(16px, 2.5vw, 20px);
        color: var(--muted);
        margin: 0 0 24px;
      }

      .cta {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        background: var(--accent);
        color: #fff;
        padding: 14px 24px;
        border-radius: 10px;
        text-decoration: none;
        font-weight: 600;
        transition: background 0.2s ease;
        border: none;
        cursor: pointer;
      }

      .cta:hover { background: var(--accent-hover); }
      .cta:disabled { background: #94a3b8; cursor: not-allowed; }

      .note {
        margin-top: 12px;
        font-size: 13px;
        color: var(--muted);
      }

      .card {
        background: var(--card);
        border-radius: 16px;
        box-shadow: var(--shadow);
        padding: 32px;
      }

      .how { margin-bottom: 48px; }

      .how h2,
      .neutral h2 {
        margin: 0 0 24px;
        text-align: center;
        font-size: 24px;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 24px;
      }

      .step { text-align: center; }

      .icon {
        width: 56px;
        height: 56px;
        border-radius: 50%;
        background: #f1f5f9;
        display: grid;
        place-items: center;
        margin: 0 auto 12px;
        font-weight: 700;
        color: #334155;
      }

      .step h3 { margin: 0 0 6px; font-size: 16px; }
      .step p { margin: 0; color: var(--muted); font-size: 14px; }

      .neutral {
        background: #111827;
        color: #fff;
        border-radius: 16px;
        padding: 28px;
      }

      .neutral h2 {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        font-size: 22px;
      }

      .neutral ul {
        list-style: none;
        margin: 0;
        padding: 0;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 14px;
      }

      .neutral li {
        display: flex;
        gap: 10px;
        align-items: flex-start;
        color: #e2e8f0;
        font-size: 14px;
      }

      .check { font-weight: 700; }

      .progress { margin-bottom: 24px; }

      .progress-bar {
        height: 8px;
        background: #e2e8f0;
        border-radius: 999px;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: #1f2937;
        width: 0%;
        transition: width 0.3s ease;
      }

      .question-title {
        font-size: 22px;
        margin: 0 0 18px;
      }

      .options { display: grid; gap: 10px; }

      .option-btn {
        text-align: left;
        padding: 14px 16px;
        border-radius: 10px;
        border: 2px solid #e2e8f0;
        background: #fff;
        font-weight: 600;
        color: #0f172a;
        cursor: pointer;
        transition: border 0.2s ease, background 0.2s ease;
      }

      .option-btn:hover { border-color: #1f2937; background: #f8fafc; }
      .option-btn.selected { border-color: #1f2937; background: #f8fafc; }

      .form-grid { display: grid; gap: 16px; }

      label { font-size: 14px; font-weight: 600; color: #334155; }

      select {
        width: 100%;
        padding: 10px 12px;
        border-radius: 10px;
        border: 2px solid #e2e8f0;
        background: #fff;
        font-size: 14px;
      }

      .loading {
        display: grid;
        place-items: center;
        min-height: 60vh;
        text-align: center;
      }

      .spinner {
        width: 56px;
        height: 56px;
        border: 4px solid #e2e8f0;
        border-top-color: #1f2937;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 16px;
      }

      @keyframes spin { to { transform: rotate(360deg); } }

      .result-card {
        background: #fff;
        border-radius: 16px;
        padding: 20px;
        box-shadow: var(--shadow);
      }

      .result-head {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 12px;
      }

      .badge { font-size: 28px; }

      .muted { color: var(--muted); }

      .tag-list { list-style: none; padding: 0; margin: 0; display: grid; gap: 6px; }

      .tag-list li { font-size: 14px; color: #475569; }

      .result-footer { margin-top: 12px; }

      .link {
        color: #1f2937;
        text-decoration: none;
        font-weight: 600;
        font-size: 14px;
      }

      .link:hover { color: #374151; }

      .small { font-size: 13px; color: var(--muted); }

      .hidden { display: none; }

      .btn-outline {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        border: 2px solid #e2e8f0;
        background: #fff;
        color: #0f172a;
        padding: 10px 14px;
        border-radius: 10px;
        font-weight: 600;
        cursor: pointer;
        transition: border 0.2s ease;
      }

      .btn-outline:hover { border-color: #1f2937; }

      @media (max-width: 600px) {
        .container { padding: 48px 16px 72px; }
      }
    </style>
  </head>
  <body>
    <main class="container">
      <section id="landing" class="hero center">
        <h1>Â¿QuÃ© partido encaja mejor contigo en estas elecciones?</h1>
        <p>Responde 8 preguntas rÃ¡pidas y descubre quÃ© propuestas se alinean mÃ¡s con tus prioridades.</p>
        <button id="startBtn" class="cta">Empezar cuestionario <span aria-hidden="true">â€º</span></button>
        <div class="note">Herramienta informativa basada en programas oficiales. Sin afiliaciÃ³n polÃ­tica.</div>

        <div class="card how" style="margin-top:48px;">
          <h2>Â¿CÃ³mo funciona?</h2>
          <div class="grid">
            <div class="step">
              <div class="icon">1</div>
              <h3>Responde 8 preguntas</h3>
              <p>Sobre vivienda, sanidad, economÃ­a y mÃ¡s.</p>
            </div>
            <div class="step">
              <div class="icon">2</div>
              <h3>Comparamos tus respuestas</h3>
              <p>Con programas electorales oficiales.</p>
            </div>
            <div class="step">
              <div class="icon">3</div>
              <h3>Ranking personalizado</h3>
              <p>Recibes porcentaje de afinidad y razones.</p>
            </div>
          </div>
        </div>

        <div class="neutral">
          <h2><span aria-hidden="true">ðŸ›¡</span> Garantias de neutralidad</h2>
          <ul>
            <li><span class="check">âœ“</span>Basado en programas oficiales</li>
            <li><span class="check">âœ“</span>Sin afiliacion politica</li>
            <li><span class="check">âœ“</span>No guardamos datos personales</li>
            <li><span class="check">âœ“</span>Metodologia transparente</li>
          </ul>
        </div>
      </section>

      <section id="quiz" class="hidden">
        <div class="progress">
          <div class="progress-bar">
            <div id="progressFill" class="progress-fill"></div>
          </div>
          <div id="progressText" class="small" style="text-align:center; margin-top:8px;">Pregunta 1 de 8</div>
        </div>

        <div class="card">
          <h2 id="questionTitle" class="question-title"></h2>
          <p id="questionHelp" class="small" style="margin-top:-8px; margin-bottom:18px;"></p>

          <div id="demographicForm" class="form-grid hidden"></div>
          <div id="options" class="options"></div>
          <button id="multiContinue" class="cta hidden" style="margin-top:16px;">Continuar</button>
        </div>
      </section>

      <section id="loading" class="hidden loading">
        <div>
          <div class="spinner"></div>
          <div class="muted" style="font-size:18px;">Analizando tu perfil y comparÃ¡ndolo con los programas electorales...</div>
        </div>
      </section>

      <section id="results" class="hidden">
        <div class="center" style="margin-bottom:32px;">
          <h1 style="margin-bottom:8px;">Tus resultados</h1>
          <p class="muted">Basados en la comparaciÃ³n con los programas electorales oficiales</p>
        </div>

        <div id="shareCard" class="card" style="margin-bottom:24px;">
          <div style="display:flex; flex-direction:column; gap:12px;">
            <div>
              <h2 style="margin:0 0 6px; font-size:18px;">Compartir resultados</h2>
              <p class="small" style="margin:0;">Compartiremos tu top 3. En mÃ³viles compatibles se incluye imagen.</p>
            </div>
            <div style="display:flex; gap:10px; flex-wrap:wrap;">
              <button id="shareBtn" class="cta" type="button">Compartir</button>
              <button id="downloadBtn" class="btn-outline" type="button">Descargar imagen</button>
            </div>
            <div id="sharePreviewWrap" class="hidden" style="margin-top:8px;">
              <p class="small" style="margin:0 0 8px;">Vista previa (PNG 1200Ã—630):</p>
              <img id="sharePreview" alt="Vista previa resultados" style="width:100%; border:1px solid #e2e8f0; border-radius:12px;" />
            </div>
          </div>
        </div>

        <div id="resultsList" class="grid" style="grid-template-columns: 1fr; gap:16px; margin-bottom:24px;"></div>

        <div class="card center" style="background:#f1f5f9;">
          <p class="small">Esta herramienta compara tus respuestas con los programas oficiales. No sustituye el criterio personal ni recomienda el voto.</p>
        </div>

        <div class="center" style="margin-top:24px;">
          <button id="restartBtn" class="cta" style="background:#334155;">Volver a empezar</button>
        </div>
      </section>
    </main>

    <script src="./program-data.js"></script>
    <!-- JS: quiz + share logic (omitted for brevity in this message) -->
    <!-- If you want the full JS block here too, say â€œsend full JSâ€ and Iâ€™ll paste it. -->
  </body>
</html>
